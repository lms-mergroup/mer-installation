- name: Replace text in file using PowerShell via win_shell
  ansible.windows.win_shell: |
    $file = '{{ file_path }}'
    if (Test-Path $file) {
      $content = Get-Content -Raw -LiteralPath $file
      $pattern = '{{ regexp }}'
      $replacement = '{{ replace }}'
      $content = $content -replace $pattern, $replacement
      Set-Content -LiteralPath $file -Value $content
    } else {
      Write-Error "File not found: $file"
    }
