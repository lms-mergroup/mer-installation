input {
  pipeline { address => body_cam_token }
}
filter {
http {
  	body_format => "json"
  	follow_redirects => false
  	url => "http://{{BODY_CAM_SERVER}}:8080/StandardApiAction_login.action?account={{BODY_CAM_SERVER_user}}&password={{BODY_CAM_SERVER_password}}"
  	verb => "GET"
  	headers => [ "Content-Type", "application/json" ]
  	target_body => "[api_response]"
       }
 	json {
        	source => "[api_response]" 
    	}
	mutate {
    		remove_field => ["JSESSIONID", "account_name", "headers", "api_response"]
	}
}
output {
  
file {
   path => "./config/token.txt"
   write_behavior => "overwrite"
   codec => line { format => "%{jsession}"}
}
stdout 	{
    codec => rubydebug
	}
}