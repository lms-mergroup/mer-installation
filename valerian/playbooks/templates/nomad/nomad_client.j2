# ----------- Client Configuration -----------

datacenter = "{{ datacenter }}"
client {
  enabled = true
  meta {
     DFS = "/v"
     name = "{{ affinity_name }}"
  }

  {% if hostvars['valerian_c01'] is defined %}
  reserved {
    cpu = 2000
    memory = 4096
  }
  {% elif hostvars['valerian'] is defined %}
  reserved {
    cpu = 5000
    memory = 6500
  }
  {% endif %}
  

  options{
     docker.volumes.enabled = true
  }

  chroot_env {
    "/etc/resolv.conf" = "/etc/resolv.conf",
    "/run/systemd/resolve/stub-resolv.conf" = "/run/systemd/resolve/stub-resolv.conf",
    "/usr/bin/nc" = "/usr/bin/nc",
    "/usr/bin/sleep" = "/usr/bin/sleep",
	  "/bin" = "/bin",
	  "/etc/alternatives/nc" = "/etc/alternatives/nc",
    "/lib/x86_64-linux-gnu" = "/lib/x86_64-linux-gnu",
    "/lib32" = "/lib32",
    "/lib64" = "/lib64",
    "/run/resolvconf" = "/run/resolvconf",
    "/sbin" = "/sbin",
    #"/usr" = "/usr",
	  "/usr/bin/wget" = "/usr/bin/wget",
    #"/usr/lib" = "/usr/lib",
    "/usr/lib/x86_64-linux-gnu/libssl.so.1.1" = "/usr/lib/x86_64-linux-gnu/libssl.so.1.1",
    "/usr/lib/x86_64-linux-gnu/libcrypto.so.1.1" = "/usr/lib/x86_64-linux-gnu/libcrypto.so.1.1",
    " /usr/lib/x86_64-linux-gnu/libpsl.so.5" = " /usr/lib/x86_64-linux-gnu/libpsl.so.5",	
	  "/etc/passwd" = "/etc/passwd",
	  "/lib/x86_64-linux-gnu/libpcre.so.3" = "/lib/x86_64-linux-gnu/libpcre.so.3",
    "/lib/x86_64-linux-gnu/libpcre.so.3.13.3" = "/lib/x86_64-linux-gnu/libpcre.so.3.13.3",
    "/lib/x86_64-linux-gnu/libuuid.so.1" = "/lib/x86_64-linux-gnu/libuuid.so.1",
    "/lib/x86_64-linux-gnu/libuuid.so.1.3.0" = "/lib/x86_64-linux-gnu/libuuid.so.1.3.0",
    "/usr/lib/x86_64-linux-gnu/libidn2.so.0" = "/usr/lib/x86_64-linux-gnu/libidn2.so.0",
    "/usr/lib/x86_64-linux-gnu/libidn2.so.0.3.3" = "/usr/lib/x86_64-linux-gnu/libidn2.so.0.3.3",
    "/usr/lib/x86_64-linux-gnu/libssl.so.1.1" = "/usr/lib/x86_64-linux-gnu/libssl.so.1.1",
    "/usr/lib/x86_64-linux-gnu/libcrypto.so.1.1" = "/usr/lib/x86_64-linux-gnu/libcrypto.so.1.1",
    "/usr/lib/x86_64-linux-gnu/libpsl.so.5" = "/usr/lib/x86_64-linux-gnu/libpsl.so.5",
    "/usr/lib/x86_64-linux-gnu/libpsl.so.5.2.0" = "/usr/lib/x86_64-linux-gnu/libpsl.so.5.2.0",
    "/usr/lib/x86_64-linux-gnu/libunistring.so.2" = "/usr/lib/x86_64-linux-gnu/libunistring.so.2",
    "/usr/lib/x86_64-linux-gnu/libunistring.so.2.1.0" = "/usr/lib/x86_64-linux-gnu/libunistring.so.2.1.0",
    "/lib/x86_64-linux-gnu/libpthread.so.0" = "/lib/x86_64-linux-gnu/libpthread.so.0",
    "/lib/x86_64-linux-gnu/libpthread-2.27.so" = "/lib/x86_64-linux-gnu/libpthread-2.27.so",
    "/lib/x86_64-linux-gnu/libdl.so.2" = "/lib/x86_64-linux-gnu/libdl.so.2",
    "/lib/x86_64-linux-gnu/libdl-2.27.so" = "/lib/x86_64-linux-gnu/libdl-2.27.so",
    "/lib/x86_64-linux-gnu/libc.so.6" = "/lib/x86_64-linux-gnu/libc.so.6",
    "/lib/x86_64-linux-gnu/libc-2.27.so" = "/lib/x86_64-linux-gnu/libc-2.27.so",
    "/lib64/ld-linux-x86-64.so.2" = "/lib64/ld-linux-x86-64.so.2",
    "/lib/x86_64-linux-gnu/ld-2.27.so" = "/lib/x86_64-linux-gnu/ld-2.27.so",  
  } 

}
plugin "raw_exec" {
  config {
    enabled = true
  }
}